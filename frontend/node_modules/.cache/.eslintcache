[{"/Users/crystalword/Documents/Coding/Portfolio Projects/chat_app/frontend/src/index.js":"1","/Users/crystalword/Documents/Coding/Portfolio Projects/chat_app/frontend/src/App.js":"2","/Users/crystalword/Documents/Coding/Portfolio Projects/chat_app/frontend/src/Components/SignInForm.js":"3","/Users/crystalword/Documents/Coding/Portfolio Projects/chat_app/frontend/src/Components/ChatInterface.js":"4","/Users/crystalword/Documents/Coding/Portfolio Projects/chat_app/frontend/src/Components/useToken.js":"5","/Users/crystalword/Documents/Coding/Portfolio Projects/chat_app/frontend/src/Components/RegisterForm.js":"6","/Users/crystalword/Documents/Coding/Portfolio Projects/chat_app/frontend/src/Components/useUser.js":"7"},{"size":251,"mtime":1649140882110,"results":"8","hashOfConfig":"9"},{"size":1182,"mtime":1649140882024,"results":"10","hashOfConfig":"9"},{"size":3903,"mtime":1649406114027,"results":"11","hashOfConfig":"9"},{"size":10365,"mtime":1650690826137,"results":"12","hashOfConfig":"9"},{"size":523,"mtime":1649140882085,"results":"13","hashOfConfig":"9"},{"size":4855,"mtime":1649491390701,"results":"14","hashOfConfig":"9"},{"size":548,"mtime":1649140882109,"results":"15","hashOfConfig":"9"},{"filePath":"16","messages":"17","suppressedMessages":"18","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"vy6rpv",{"filePath":"19","messages":"20","suppressedMessages":"21","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"22"},{"filePath":"23","messages":"24","suppressedMessages":"25","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"26","messages":"27","suppressedMessages":"28","errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"29"},{"filePath":"30","messages":"31","suppressedMessages":"32","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"33","messages":"34","suppressedMessages":"35","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"36","messages":"37","suppressedMessages":"38","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/crystalword/Documents/Coding/Portfolio Projects/chat_app/frontend/src/index.js",[],[],"/Users/crystalword/Documents/Coding/Portfolio Projects/chat_app/frontend/src/App.js",["39"],[],"import \"./App.css\";\nimport ChatInterface from \"./Components/ChatInterface\";\nimport SignInForm from \"./Components/SignInForm\";\nimport RegisterForm from \"./Components/RegisterForm\";\nimport useToken from \"./Components/useToken\";\nimport { BrowserRouter as Router, Route, Routes } from \"react-router-dom\";\nimport useUser from \"./Components/useUser\";\n\nfunction App() {\n  const { token, setToken } = useToken();\n  const { signedInUser, setSignedInUser } = useUser();\n\n  return (\n    <div>\n      <Router>\n        <Routes>\n          {!token && token !== \"\" && token !== undefined ? (\n            <>\n              <Route path=\"/\" element={<SignInForm />} />\n              <Route path=\"/register\" element={<RegisterForm />} />\n              <Route path=\"/chat\" element={<SignInForm />} />\n            </>\n          ) : (\n            <>\n              <Route\n                path=\"/chat\"\n                setToken={setToken}\n                setSignedInUser={setSignedInUser}\n                element={<ChatInterface />}\n              />\n              <Route path=\"/\" element={<SignInForm />} />\n            </>\n          )}\n        </Routes>\n      </Router>\n    </div>\n  );\n}\n\nexport default App;\n","/Users/crystalword/Documents/Coding/Portfolio Projects/chat_app/frontend/src/Components/SignInForm.js",[],[],"/Users/crystalword/Documents/Coding/Portfolio Projects/chat_app/frontend/src/Components/ChatInterface.js",["40","41","42","43"],[],"import React, { useEffect, useState } from \"react\";\nimport { Button } from \"react-bootstrap\";\nimport \"./ChatInterface.css\";\nimport { useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport useToken from \"./useToken\";\nimport useUser from \"./useUser\";\nimport io from \"socket.io-client\";\n\nconst ChatInterface = () => {\n  window.setTimeout(function () {\n    let element = document.getElementById(\"chatBox\");\n    element.scrollTop = element.scrollHeight;\n  });\n \n\n  const [topic, setTopic] = useState(\"General\");\n\n  const [messages, setMessages] = useState([]);\n\n  const [users, setUsers] = useState([]);\n\n  const { removeToken } = useToken();\n\n  const { signedInUser, signOutUser } = useUser();\n\n  const [activeUsers, setActiveUsers] = useState([]);\n\n  const [message, setMessage] = useState(\"\");\n\n  let navigate = useNavigate();\n\n  const getUserInfo = (user_id) => {\n    return users.find((user) => user.id === user_id);\n  };\n\n  const selectSignedInUser = (signedInUser) => {\n    let theUserId;\n    users.find((user) => {\n      if (user.username === signedInUser) {\n        theUserId = user.id;\n      }\n    });\n    return theUserId;\n  };\n\n  async function getMessages() {\n    await axios.get(`api/messages/${topic}`).then((res) => {\n      setMessages(res.data);\n    });\n  }\n\n  async function getUsers() {\n    await axios.get(\"api/users\").then((res) => {\n      setUsers(res.data);\n    });\n  }\n\n  async function getActiveUsers() {\n    await axios.get(\"api/activeusers\").then((res) => {\n      setActiveUsers(res.data);\n    });\n  }\n\n  const actives = activeUsers?.map((user) => {\n    return (\n      <table className=\"d-flex text-center justify-content-center align-items-center pb-2\">\n        <td\n          style={\n            user?.username === signedInUser\n              ? { color: \"#ffa861\", fontWeight: \"bold\" }\n              : { color: \"#bafad4\" }\n          }\n        >\n          {user?.username === signedInUser\n            ? user?.username + \" (You)\"\n            : user?.username}\n        </td>\n        <br></br>\n      </table>\n    );\n  });\n\n  const data = messages.map((message) => {\n    return {\n      ...message,\n      user: getUserInfo(message.userid),\n    };\n  });\n\n  let userId = selectSignedInUser(signedInUser);\n\n  const databaseSend = () => {\n    let messageBox = document.getElementById(\"messageBox\");\n    let newText = message.replaceAll(\"'\", \"''\");\n\n    if (message !== '') {\n      socket.emit(\"new_message\", {userId: userId, text:message, topic: topic});\n      console.log(message)\n      setMessage(\"\");\n      messageBox.value = \"\";\n\n    }\n\n    \n\n    // const data = {\n    //   userId: userId,\n    //   text: newText,\n    //   topic: topic,\n    // };\n\n    // axios\n    //   .post(\"/api/messages\", data, {\n    //     headers: {\n    //       Accept: \"application/json\",\n    //       \"Content-Type\": \"application/json\",\n    //     },\n    //   })\n    //   .then((res) => {\n        \n    //     return res;\n    //   })\n    //   .then((res) => {\n    //     // getMessages();\n    //     getActiveUsers();\n    //     messageBox.value = \"\";\n    //   })\n    //   .catch((error) => {\n    //     console.log(\"There was an error!\", error);\n    //   });\n  };\n\n  const logOut = () => {\n    axios\n      .post(\"/api/logout\", data, {\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n        },\n      })\n      .then((res) => {\n        removeToken();\n        signOutUser();\n        navigate(\"/\");\n        window.location.reload();\n      })\n      .catch((error) => {\n        console.log(\"An error was caught!\", error);\n      });\n\n    const user = {\n      username: signedInUser,\n    };\n\n    axios\n      .post(\"api/deactivateuser\", user, {\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n        },\n      })\n      .then((res) => {\n        console.log(res);\n        return res;\n      })\n      .catch((error) => {\n        console.log(\"There was an error!\", error);\n      });\n  };\n\n  useEffect(() => {\n    getMessages();\n    getUsers();\n    getActiveUsers();\n  }, [topic]);\n\n\n  const socket = io.connect()\n\n  useEffect(() => {\n      socket.on(\"connect\", () => {\n        console.log(socket.id)\n      })\n      socket.on(\"new_message\", (message) => {\n      setMessages((messages) => [...messages, message])\n      getMessages()\n      console.log(message)\n    } )\n\n  },[])\n\n  const formatTime = (utcTime) => {\n    const time = new Date(utcTime);\n    return time.toLocaleTimeString([], { hour: \"numeric\", minute: \"2-digit\" });\n  };\n\n  const theMessages =\n    data &&\n    data.map((message, index) => {\n      let prev = data[index - 1];\n      let current = data[index];\n\n      return (\n        <div>\n          {prev?.formatted_date === current?.formatted_date ? (\n            \"\"\n          ) : (\n            <div>\n              <div className=\"fw-bold mx-auto horizontalLine\"></div>\n              <div className=\"fw-bold mt-4\" style={{ color: \"#444c55\" }}>\n                {message?.formatted_date}\n              </div>\n            </div>\n          )}\n\n          <div\n            className=\"chat-container\"\n            style={\n              message.user?.username === signedInUser\n                ? { background: \"#e45437\" }\n                : { background: \"\" }\n            }\n            key={index}\n          >\n            <div\n              className=\"card-header d-flex justify-content-between p-3\"\n              style={{ borderBottom: \"1px solid rgba(255, 255, 255, 0.3\" }}\n            >\n              <p className=\"fw-bold mb-0\">{message?.user?.username}</p>\n              <p className=\" small mb-0\">\n                <i>{formatTime(message?.time_created)}</i>\n              </p>\n            </div>\n            <div className=\"card-body\">\n              <p className=\"mb-0 mx-auto p-2\">{message.text}</p>\n            </div>\n          </div>\n        </div>\n      );\n    });\n\n  return (\n    <>\n      <div\n        id=\"container\"\n        // onFocus={() => {\n        //   getActiveUsers();\n        //   getMessages();\n        // }}\n        // onClick={getActiveUsers}\n      >\n        <div className=\"text-center mx-auto\" id=\"navbar\">\n          {topic}\n        </div>\n\n        <div className=\"userBox col-3 userText\">\n          <h6 className=\"text-center p-3 mt-2 pb-1\">Active Users</h6>\n          <p className=\"text-center\">{actives}</p>\n\n          <h6 className=\"text-center p-3\">Topics</h6>\n          <Button\n            className={\n              topic === \"General\"\n                ? \"p-2 d-flex justify-content-center align-items-center mx-auto mb-4 activeButton\"\n                : \"p-2 d-flex justify-content-center align-items-center mx-auto mb-4\"\n            }\n            autoFocus=\"True\"\n            id=\"General\"\n            onClick={(e) => {\n              setTopic(e.target.id);\n            }}\n          >\n            General\n          </Button>\n          <Button\n            className={\n              topic === \"Art\"\n                ? \"p-2 d-flex justify-content-center align-items-center mx-auto mb-4 activeButton\"\n                : \"p-2 d-flex justify-content-center align-items-center mx-auto mb-4\"\n            }\n            id=\"Art\"\n            onClick={(e) => {\n              setTopic(e.target.id);\n            }}\n          >\n            Art\n          </Button>\n          <Button\n            className={\n              topic === \"Film & TV\"\n                ? \"p-2 d-flex justify-content-center align-items-center mx-auto mb-4 activeButton\"\n                : \"p-2 d-flex justify-content-center align-items-center mx-auto mb-4\"\n            }\n            id=\"Film & TV\"\n            onClick={(e) => {\n              setTopic(e.target.id);\n            }}\n          >\n            Film & TV\n          </Button>\n          <Button\n            className={\n              topic === \"Music\"\n                ? \"p-2 d-flex justify-content-center align-items-center mx-auto mb-4 activeButton\"\n                : \"p-2 d-flex justify-content-center align-items-center mx-auto mb-4\"\n            }\n            id=\"Music\"\n            onClick={(e) => {\n              setTopic(e.target.id);\n            }}\n          >\n            Music\n          </Button>\n          <Button\n            className={\n              topic === \"Sports\"\n                ? \"p-2 d-flex justify-content-center align-items-center mx-auto mb-4 activeButton\"\n                : \"p-2 d-flex justify-content-center align-items-center mx-auto mb-4\"\n            }\n            id=\"Sports\"\n            onClick={(e) => {\n              setTopic(e.target.id);\n            }}\n          >\n            Sports\n          </Button>\n\n          <Button\n            className=\"p-3 d-flex text-center mx-auto logoutBtn\"\n            onClick={logOut}\n          >\n            Logout\n          </Button>\n        </div>\n\n        <div className=\"parent\">\n          <div className=\"discussionBox\" id=\"chatBox\">\n            {theMessages}\n          </div>\n\n          <div className=\"flex child\">\n            <div>\n              <div className=\"input-group\">\n                <textarea\n                  id=\"messageBox\"\n                  type=\"text\"\n                  className=\"form-control messageBox\"\n                  rows=\"2\"\n                  cols=\"500\"\n                  // onFocus={() => {\n                  //   getActiveUsers();\n                  //   getMessages();\n                  // }}\n                  // onChange={() => {\n                  //   getActiveUsers();\n                  //   getMessages();\n                  // }}\n                  onChange={(e) => {\n                    setMessage(e.target.value);\n                  }}\n                  value={message}\n                  placeholder=\"Type Your Message\"\n                  onKeyUp={(e) => {\n                    if (e.key === \"Enter\") {\n                      databaseSend();\n                    }\n                  }}\n                />\n              </div>\n            </div>\n            <Button\n              type=\"submit\"\n              className=\"btn sendBtn\"\n              onClick={databaseSend}\n              // onClick={() => {\n              //   if (message !== '') {\n              //     socket.emit(\"message\", message);\n              //     setMessage(\"\");\n\n              //   }\n              // }}\n            >\n              SEND\n            </Button>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default ChatInterface;\n","/Users/crystalword/Documents/Coding/Portfolio Projects/chat_app/frontend/src/Components/useToken.js",[],[],"/Users/crystalword/Documents/Coding/Portfolio Projects/chat_app/frontend/src/Components/RegisterForm.js",[],[],"/Users/crystalword/Documents/Coding/Portfolio Projects/chat_app/frontend/src/Components/useUser.js",[],[],{"ruleId":"44","severity":1,"message":"45","line":11,"column":11,"nodeType":"46","messageId":"47","endLine":11,"endColumn":23},{"ruleId":"48","severity":1,"message":"49","line":39,"column":23,"nodeType":"50","messageId":"51","endLine":39,"endColumn":25},{"ruleId":"44","severity":1,"message":"52","line":95,"column":9,"nodeType":"46","messageId":"47","endLine":95,"endColumn":16},{"ruleId":"53","severity":1,"message":"54","line":176,"column":6,"nodeType":"55","endLine":176,"endColumn":13,"suggestions":"56"},{"ruleId":"53","severity":1,"message":"57","line":191,"column":5,"nodeType":"55","endLine":191,"endColumn":7,"suggestions":"58"},"no-unused-vars","'signedInUser' is assigned a value but never used.","Identifier","unusedVar","array-callback-return","Array.prototype.find() expects a return value from arrow function.","ArrowFunctionExpression","expectedInside","'newText' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'getMessages'. Either include it or remove the dependency array.","ArrayExpression",["59"],"React Hook useEffect has missing dependencies: 'getMessages' and 'socket'. Either include them or remove the dependency array.",["60"],{"desc":"61","fix":"62"},{"desc":"63","fix":"64"},"Update the dependencies array to be: [getMessages, topic]",{"range":"65","text":"66"},"Update the dependencies array to be: [getMessages, socket]",{"range":"67","text":"68"},[4077,4084],"[getMessages, topic]",[4377,4379],"[getMessages, socket]"]